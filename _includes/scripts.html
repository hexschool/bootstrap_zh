<script src="{{ site.cdn.jquery }}" integrity="{{ site.cdn.jquery_hash }}" crossorigin="anonymous"></script>
<script>window.jQuery || document.write('<script src="{{ site.baseurl }}/assets/js/vendor/jquery-slim.min.js"><\/script>')</script>

<script src="{{ site.baseurl }}/assets/js/vendor/popper.min.js"{% if site.github %} integrity="{{ site.cdn.popper_hash }}" crossorigin="anonymous"{% endif %}></script>

{%- if site.github -%}
  <script src="{{ site.baseurl }}/dist/js/bootstrap.min.js" integrity="{{ site.cdn.js_hash }}" crossorigin="anonymous"></script>
{%- else -%}
  <script src="{{ site.baseurl }}/dist/js/bootstrap.js"></script>
{%- endif -%}

{%- if page.layout == "docs" -%}
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
{%- endif -%}

{%- if site.github -%}
  <script src="{{ site.baseurl }}/assets/js/docs.min.js"></script>
{%- else -%}
  <script src="{{ site.baseurl }}/assets/js/vendor/anchor.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/clipboard.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/vendor/holder.min.js"></script>
  <script src="{{ site.baseurl }}/assets/js/src/application.js?{{ site.time | date_to_xmlschema }}"></script>
  <!-- <script src="{{ site.baseurl }}/assets/js/src/search.js?{{ site.time | date_to_xmlschema }}"></script> -->
  <script src="{{ site.baseurl }}/assets/js/src/ie-emulation-modes-warning.js?{{ site.time | date_to_xmlschema }}"></script>
  <script src="{{ site.baseurl }}/assets/js/src/pwa.js?{{ site.time | date_to_xmlschema }}"></script>
{%- endif -%}

{%- if page.layout == "docs" -%}
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    apiKey: 'ef316997b6983b7e641cb5ed2a6683d1',
    indexName: 'hexschool',
    inputSelector: '#search-input',
    handleSelected: function (input, event, suggestion) {
      var url = suggestion.url;
      url = suggestion.isLvl1 ? url.split('#')[0]: url;
      // If it's a title we remove the anchor so it does not jump.
      window.location.href = url;
    },
    // transformData: function (hits) {
    //   return hits.map(function (hit) {
    //     hit.url = hit.url.replace('https://bootstrap.hexschool.com/', '/docs/4.0');
    //     return hit;
    //   });
    // },
    debug: false // Set debug to true if you want to inspect the dropdown
  });
</script>
{%- endif -%}

<script>
  Holder.addTheme('gray', {
    bg: '#777',
    fg: 'rgba(255,255,255,.75)',
    font: 'Helvetica',
    fontweight: 'normal'
  });
</script>

<script>
  (function () {
    var allTitle = document.querySelectorAll('.bd-content h2, .bd-content h3');
    var arrayTitle = Array.from(allTitle);
    var bdToc = document.querySelector('.bd-toc');

    var sideNav = `
      <ul class="section-nav">
        ${arrayTitle.map((item, i) => {
        var string = '';
        if (item.tagName === 'H2') {
          string = `<li class="toc-entry toc-h2">
            <a href="#${item.id}">${item.textContent}</a>
          </li>`
        } else if (item.tagName === 'H3') {
          string = `<li class="toc-entry toc-h3">
            <a href="#${item.id}">${item.textContent}</a>
          </li>`
        }

        if (item.tagName === 'H3') {
          if (i >= 1 && arrayTitle[i - 1].tagName === 'H2') {
            string = `<ul>${string}`;
          }
          if ((i + 1) < arrayTitle.length && arrayTitle[i + 1].tagName === 'H2') {
            string = `${string}</ul>`;
          }
          if ((i + 1) === arrayTitle.length) {
            string = `${string}</ul>`;
          }
        }
        return string;
      }).join('')}`;
    bdToc.innerHTML = sideNav;
  })();
</script>